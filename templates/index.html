<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Football Match Predictor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            background: #0d1b2a;
            font-family: 'Poppins', sans-serif;
            color: white;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: auto;
            background: #1b263b;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 0 12px #0007;
        }

        h2 { text-align: center; }

        select, button {
            width: 100%;
            padding: 12px;
            margin-top: 10px;
            border-radius: 8px;
            border: none;
            background: #415a77;
            color: white;
        }

        button {
            background: #4cc9f0;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }

        .score-box {
            margin-top: 20px;
            padding: 15px;
            border-radius: 12px;
            background: rgba(255,255,255,0.05);
            text-align: center;
            font-weight: 600;
            display: none;
        }

        #result_box {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .card {
            background: #1f2a48;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 0 8px #0006;
        }

        .card-title {
            font-size: 14px;
            color: #4cc9f0;
        }

        .card-value {
            font-size: 20px;
            font-weight: bold;
            margin-top: 6px;
        }
    </style>
</head>

<body>
<div class="container">

<h2>âš½ Football Match Predictor</h2>

<label>Home Team</label>
<select id="home_team">
    <option value="">-- Select Team --</option>
    {% for t in teams %}
        <option value="{{ t }}">{{ t }}</option>
    {% endfor %}
</select>

<label style="margin-top:15px;">Away Team</label>
<select id="away_team">
    <option value="">-- Select Team --</option>
    {% for t in teams %}
        <option value="{{ t }}">{{ t }}</option>
    {% endfor %}
</select>

<button onclick="predict()">Predict Match</button>

<div id="team-score" class="score-box"></div>
<div id="result_box"></div>

</div>

<script>
function predict() {

    const home = document.getElementById("home_team").value;
    const away = document.getElementById("away_team").value;

    if (!home || !away) {
        alert("Home & Away wajib diisi");
        return;
    }

    if (home === away) {
        alert("Home dan Away tidak boleh sama");
        return;
    }

    const fd = new FormData();
    fd.append("home_team", home);
    fd.append("away_team", away);

    fetch("/predict", {
        method: "POST",
        body: fd
    })
    .then(res => res.json())
    .then(data => {

        if (data.error) throw new Error(data.error);

        const scoreBox = document.getElementById("team-score");
        scoreBox.style.display = "block";
        scoreBox.innerHTML = `
            <div style="font-size:24px">
                ${data.home_team} ${data.home_goals} - ${data.away_goals} ${data.away_team}
            </div>
            <div style="margin-top:8px">
                Final Winner: <b>${data.Final_Winner}</b>
            </div>
        `;

        document.getElementById("result_box").innerHTML = `
            <div class="card"><div class="card-title">Random Forest</div><div class="card-value">${data.RandomForest}</div></div>
            <div class="card"><div class="card-title">XGBoost</div><div class="card-value">${data.XGBoost}</div></div>
            <div class="card"><div class="card-title">KNN</div><div class="card-value">${data.KNN}</div></div>

            <div class="card"><div class="card-title">RF Confidence</div><div class="card-value">${data.RF_conf}</div></div>
            <div class="card"><div class="card-title">XGB Confidence</div><div class="card-value">${data.XGB_conf}</div></div>
            <div class="card"><div class="card-title">KNN Confidence</div><div class="card-value">${data.KNN_conf}</div></div>

            <div class="card"><div class="card-title">RF Score</div><div class="card-value">${data.RF_score}</div></div>
            <div class="card"><div class="card-title">XGB Score</div><div class="card-value">${data.XGB_score}</div></div>
            <div class="card"><div class="card-title">Ensemble Score</div><div class="card-value">${data.Ensemble_score}</div></div>
        `;
    })
    .catch(err => alert(err.message));
}
</script>

</body>
</html>
